A US federal judge in Virginia has ruled that the state's ban on same-sex marriage is unconstitutional.

It is the first time that a southern state has had a voter-approved prohibition on gay marriage overturned.

The ruling will not apply pending a possible appeal. Same-sex marriages are legal in 17 US states, most of them in the north-east, and Washington DC.

Such unions have been approved either through legislation, court rulings or voter referendums.

The ruling by Judge Arenda Wright Allen in Norfolk followed a legal challenge on same-sex marriage by a gay couple.

The judge agreed with them that the ban infringed their constitutional rights and their fundamental freedom to marry.

"Through its decision today, the court has upheld the principles of equality upon which this nation was founded," the plaintiff's lawyer, Theodore Olson, told US media.

Opponents of gay marriage decried the ruling, however, calling the judge "arrogant" and "substituting her personal preferences" for the judgement of Virginia voters.

"Our nation's judicial system has been infected by activist judges, which threaten the stability of our nation and the rule of law," Tony Perkins, president of the conservative Family Research Council, told the Associated Press news agency.

Many expect the case - or one like it - to go all the way to the US Supreme Court, the BBC's Beth McLeod in Washington reports.

Virginia is the first state in the old confederacy - a group of southern states that are traditionally seen as socially conservative - to have its ban overturned.

The decision adds momentum to a growing acceptance of gay marriage in the US, our correspondent adds.

Earlier this week, a federal judge in Kentucky - another southern state - ruled that it must recognise same-sex marriages performed elsewhere in the US.

However, the judge did not rule on the legality of same-sex marriages inside Kentucky, effectively meaning that the current ban remained in place.