A leaked e-mail seen by BBC Scotland suggests the Scottish government may not introduce a bill on gay marriage until Westminster changes the law.

The correspondence between civil servants suggests SNP ministers want the UK Equalities Act to be amended.

It suggests ministers want protection for celebrants who disapprove of same-sex marriage, and freedom of speech for those who want to speak out against it.

The Scottish government said it would confirm its intentions within weeks.

The correspondence seen by the BBC said ministers were expected to introduce the policy, but not before the UK Equalities Act, which guarantees equal treatment from discrimination on the grounds of sexual orientation, was amended first.

It said: "We may announce that we will proceed with the introduction of same-sex marriage, by means of both civil and religious ceremonies, and with the introduction of religious ceremonies to register civil partnerships.

"However we may also say, and give considerable prominence to saying, that the government recognises the need to provide appropriate protections for some in Scottish society who are against same sex marriage.

"I expect we will say that the Equality Act 2010 needs to be amended to provide full protection for individual celebrants who are opposed to same-sex ceremonies, even if their religious body has decided to opt in to carrying out such ceremonies.

"...We would not introduce a bill into the Scottish Parliament until we had reached agreement with the UK government on the types of amendment that might be needed to the Equality Act 2010.

"It is likely that our ministers would not wish to commence any Scottish Act introducing same-sex marriage until the amendment to the Equality Act is in place."

A decision on whether to bring forward a bill on same-sex marriage had been expected on Tuesday.

But a government spokesman, speaking after a cabinet meeting on Tuesday afternoon, said: "This is an important issue and it is right that cabinet takes the time to get both the principle and the detail of the decision right."

Labour branded the move as "weak", while the Scottish Youth Parliament, which has played a key role in pushing the issue up the political agenda, expressed disappointment.

The leaked e-mail suggested new guidance may be needed for teachers on the subject, which the civil servant described as "sensitive".

It said: "On education, our initial thinking is that we might need to issue more guidance on matters such as teachers using educational material which might be sensitive and on parents' rights to be consulted on lessons which might be sensitive.

"Again, there may be pressure for legislation. However, we think this might be too inflexible and could have an adverse impact on a child's right to an education."

Responding to the e-mail, a Scottish government spokesperson said: "The decision on whether or not to bring forward legislation on same sex marriage is for the Scottish government. We will confirm our intentions on the way forward by the end of this month.

"We do not comment on leaks but this is not new information - it is set out on the consultation paper published last September that if same sex marriage is introduced in Scotland we would take steps to work with Westminster to make any changes needed to the Equality Act to protect individual celebrants."

A Home Office spokesperson said: "We are working closely with the Scottish government to consider whether any specific changes to the Equality Act, or other legislation, may be required.

"We will produce conclusions on our own consultation - covering England and Wales - by the end of the year."

Scotland For Marriage, an organisation supporting the current definition of marriage said: "This leaked e-mail shows that we have been right all along about the far-reaching implications of redefining marriage, including its impact on schools.

"You can't rewrite the law on marriage without unravelling hundreds of years of law and culture."

The proposals for same-sex marriage, which would see Scotland become the first part of the UK to introduce the policy, have provoked opposition from some religious groups.

The Catholic Church and Church of Scotland strongly oppose the policy.

At the start of the week, Britain's most senior Roman Catholic cleric, Cardinal Keith O'Brien, urged the Scottish government to hold a public vote on same-sex marriage.

However, that suggestion was dismissed following the cabinet meeting on Tuesday.